// generated by info.scce.dime.generator.rest.SelectiveUserGenerator
package de.ls5.dywa.generated.rest.user;

@javax.transaction.Transactional
@javax.ws.rs.Path("/user/current")
public class CurrentUserController {
	
	@javax.inject.Inject
	private de.ls5.dywa.generated.controller.onbroke.models.app.BaseUserController subjectController;

	@javax.inject.Inject
	private info.scce.dime.rest.ObjectCache objectCache;
	
	@javax.ws.rs.GET
	@javax.ws.rs.Path("User/{a:" +
		"AdminOverviewTabUserSelectivex2x2_8iqPUVLkEe2djpkPxa2Z3Q|" +
		"AdminAreaUserSelectivex5x2_YggYMVFOEe2J0bu3ffrh5w|" +
		"BrokerApprovalTabUserSelectivex2x3_sK8JMVFTEe2J0bu3ffrh5w|" +
		"AdminAreaHeaderUserSelectivex1_ikwGUVE4Ee2Vgcav4Znc_w|" +
		"AdminOverviewTabUserSelectivex3x2_8iqPUVLkEe2djpkPxa2Z3Q|" +
		"BrokerAreaUserSelectivex3x3_dCbEMVFOEe2J0bu3ffrh5w|" +
		"AdminOfferTableUserSelectivex1x2x2_G6PuMVLlEe2djpkPxa2Z3Q|" +
		"EditAssignmentUserSelectivex1x12x12x19x19x2x2_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA|" +
		"AdminAreaUserSelectivex4x2_YggYMVFOEe2J0bu3ffrh5w|" +
		"BrokerBiddingTableUserSelectivex1x4x4_Ln__HYPHEN_MINUS__sIFGGEe2J0bu3ffrh5w|" +
		"EditUserFormUserSelectivex1_CPN5EWBEEe2RjrkbQARhdg|" +
		"BrokerAreaHeaderUserSelectivex1_kylP0VE4Ee2Vgcav4Znc_w|" +
		"UserAreaHeaderUserSelectivex1_oEUtYVE4Ee2Vgcav4Znc_w|" +
		"AdminBiddingTableUserSelectivex1x2x2_QIJywVLmEe2djpkPxa2Z3Q" +
		"}/private")
	@javax.ws.rs.Produces(javax.ws.rs.core.MediaType.APPLICATION_JSON)
	public de.ls5.dywa.generated.rest.types.User getEditAssignmentUserSelectivex1x12x12x19x19x2x2_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA() {
		final de.ls5.dywa.generated.entity.onbroke.models.app.BaseUser subject = subjectController.read((Long)org.apache.shiro.SecurityUtils.getSubject().getPrincipal());

		for (final de.ls5.dywa.generated.entity.onbroke.models.app.User concreteUser: subject.getuser_User()) {
			if (de.ls5.dywa.generated.entity.onbroke.models.app.User.class.isInstance(concreteUser)) {
				final de.ls5.dywa.generated.entity.onbroke.models.app.User origUser = (de.ls5.dywa.generated.entity.onbroke.models.app.User) concreteUser;
				final Object switchedToUser = origUser.getdywaSwitchedTo();
				de.ls5.dywa.generated.entity.onbroke.models.app.User currentUser = origUser;
				if (de.ls5.dywa.generated.entity.onbroke.models.app.User.class.isInstance(switchedToUser)) {
					currentUser = (de.ls5.dywa.generated.entity.onbroke.models.app.User) switchedToUser;
				} else if (switchedToUser != null) {
					throw new IllegalStateException("Type of switched user '" + switchedToUser.getClass() + "' does not match expected type of current user '" + de.ls5.dywa.generated.entity.onbroke.models.app.User.class + "'");
				}
				de.ls5.dywa.generated.rest.types.User result = objectCache.getRestTo(currentUser);
				
				if (result == null) {
					result = de.ls5.dywa.generated.rest.types.User.fromDywaEntity(currentUser, objectCache);
				}
				
				if (!objectCache.containsSelective(result, "EditAssignmentUserSelectivex1x12x12x19x19x2x2_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA")) {
					de.ls5.dywa.generated.rest.types.EditAssignmentUserSelectivex1x12x12x19x19x2x2_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA.copy(currentUser, result, objectCache);
				}

				return result;
			}
		}
		throw new IllegalStateException("Did not find concrete user of type '" + de.ls5.dywa.generated.entity.onbroke.models.app.User.class + "'");
	}
	@javax.ws.rs.GET
	@javax.ws.rs.Path("User/" +
		"UserAreaUserSelectivex1_jIfqkVFOEe2J0bu3ffrh5w" +
		"/private")
	@javax.ws.rs.Produces(javax.ws.rs.core.MediaType.APPLICATION_JSON)
	public de.ls5.dywa.generated.rest.types.User getUserAreaUserSelectivex1_jIfqkVFOEe2J0bu3ffrh5w() {
		final de.ls5.dywa.generated.entity.onbroke.models.app.BaseUser subject = subjectController.read((Long)org.apache.shiro.SecurityUtils.getSubject().getPrincipal());

		for (final de.ls5.dywa.generated.entity.onbroke.models.app.User concreteUser: subject.getuser_User()) {
			if (de.ls5.dywa.generated.entity.onbroke.models.app.User.class.isInstance(concreteUser)) {
				final de.ls5.dywa.generated.entity.onbroke.models.app.User origUser = (de.ls5.dywa.generated.entity.onbroke.models.app.User) concreteUser;
				final Object switchedToUser = origUser.getdywaSwitchedTo();
				de.ls5.dywa.generated.entity.onbroke.models.app.User currentUser = origUser;
				if (de.ls5.dywa.generated.entity.onbroke.models.app.User.class.isInstance(switchedToUser)) {
					currentUser = (de.ls5.dywa.generated.entity.onbroke.models.app.User) switchedToUser;
				} else if (switchedToUser != null) {
					throw new IllegalStateException("Type of switched user '" + switchedToUser.getClass() + "' does not match expected type of current user '" + de.ls5.dywa.generated.entity.onbroke.models.app.User.class + "'");
				}
				de.ls5.dywa.generated.rest.types.User result = objectCache.getRestTo(currentUser);
				
				if (result == null) {
					result = de.ls5.dywa.generated.rest.types.User.fromDywaEntity(currentUser, objectCache);
				}
				
				if (!objectCache.containsSelective(result, "UserAreaUserSelectivex1_jIfqkVFOEe2J0bu3ffrh5w")) {
					de.ls5.dywa.generated.rest.types.UserAreaUserSelectivex1_jIfqkVFOEe2J0bu3ffrh5w.copy(currentUser, result, objectCache);
				}

				return result;
			}
		}
		throw new IllegalStateException("Did not find concrete user of type '" + de.ls5.dywa.generated.entity.onbroke.models.app.User.class + "'");
	}
	@javax.ws.rs.GET
	@javax.ws.rs.Path("User/{a:" +
		"AdminUsersTableUserSelectivex1_q5eDsVLnEe2djpkPxa2Z3Q|" +
		"AdminAreaUserSelectivex3_YggYMVFOEe2J0bu3ffrh5w|" +
		"AdminOverviewTabUserSelectivex1_8iqPUVLkEe2djpkPxa2Z3Q" +
		"}/private")
	@javax.ws.rs.Produces(javax.ws.rs.core.MediaType.APPLICATION_JSON)
	public de.ls5.dywa.generated.rest.types.User getAdminOverviewTabUserSelectivex1_8iqPUVLkEe2djpkPxa2Z3Q() {
		final de.ls5.dywa.generated.entity.onbroke.models.app.BaseUser subject = subjectController.read((Long)org.apache.shiro.SecurityUtils.getSubject().getPrincipal());

		for (final de.ls5.dywa.generated.entity.onbroke.models.app.User concreteUser: subject.getuser_User()) {
			if (de.ls5.dywa.generated.entity.onbroke.models.app.User.class.isInstance(concreteUser)) {
				final de.ls5.dywa.generated.entity.onbroke.models.app.User origUser = (de.ls5.dywa.generated.entity.onbroke.models.app.User) concreteUser;
				final Object switchedToUser = origUser.getdywaSwitchedTo();
				de.ls5.dywa.generated.entity.onbroke.models.app.User currentUser = origUser;
				if (de.ls5.dywa.generated.entity.onbroke.models.app.User.class.isInstance(switchedToUser)) {
					currentUser = (de.ls5.dywa.generated.entity.onbroke.models.app.User) switchedToUser;
				} else if (switchedToUser != null) {
					throw new IllegalStateException("Type of switched user '" + switchedToUser.getClass() + "' does not match expected type of current user '" + de.ls5.dywa.generated.entity.onbroke.models.app.User.class + "'");
				}
				de.ls5.dywa.generated.rest.types.User result = objectCache.getRestTo(currentUser);
				
				if (result == null) {
					result = de.ls5.dywa.generated.rest.types.User.fromDywaEntity(currentUser, objectCache);
				}
				
				if (!objectCache.containsSelective(result, "AdminOverviewTabUserSelectivex1_8iqPUVLkEe2djpkPxa2Z3Q")) {
					de.ls5.dywa.generated.rest.types.AdminOverviewTabUserSelectivex1_8iqPUVLkEe2djpkPxa2Z3Q.copy(currentUser, result, objectCache);
				}

				return result;
			}
		}
		throw new IllegalStateException("Did not find concrete user of type '" + de.ls5.dywa.generated.entity.onbroke.models.app.User.class + "'");
	}
	
	public <T> T getCurrentUser(final Class<T> userType) {
		final de.ls5.dywa.generated.entity.onbroke.models.app.BaseUser subject = subjectController.read((Long)org.apache.shiro.SecurityUtils.getSubject().getPrincipal());

		for (final de.ls5.dywa.generated.entity.onbroke.models.app.User concreteUser: subject.getuser_User()) {
			if (userType.isAssignableFrom(concreteUser.getClass())) {
				return (T)concreteUser;
			}
		}
		throw new IllegalStateException("Did not find concrete user of type '" + userType.getSimpleName() + "'");
	}
}
