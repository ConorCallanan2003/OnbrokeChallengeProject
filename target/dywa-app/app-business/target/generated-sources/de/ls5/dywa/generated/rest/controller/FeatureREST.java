// generated by info.scce.dime.generator.rest.SelectiveControllerGenerator
package de.ls5.dywa.generated.rest.controller;

@javax.transaction.Transactional
@javax.enterprise.context.RequestScoped
public class FeatureREST {

	@javax.inject.Inject
	private info.scce.dime.rest.ObjectCache objectCache;
	@javax.inject.Inject
	private de.ls5.dywa.generated.util.DomainFileController DomainFileController;
	
	
	@javax.inject.Inject
	private de.ls5.dywa.generated.rest.controller.FeatureREST FeatureREST;
	@javax.inject.Inject
	private de.ls5.dywa.generated.controller.onbroke.models.app.FeatureController FeatureController;
	@javax.inject.Inject
	private de.ls5.dywa.generated.rest.controller.PriorityREST PriorityREST;
	@javax.inject.Inject
	private de.ls5.dywa.generated.controller.onbroke.models.app.PriorityController PriorityController;

	public long create(final java.lang.String name) {
		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj = this.FeatureController.create(name);
		return obj.getDywaId();
	}

	
	public de.ls5.dywa.generated.rest.types.Feature read_EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA(final long id) {
		
		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj = this.FeatureController.read(id);
		
		if (obj == null) {
			return null;
		}

		de.ls5.dywa.generated.rest.types.Feature result = objectCache.getRestTo(obj);
		
		if (result == null) {
			result = de.ls5.dywa.generated.rest.types.Feature.fromDywaEntity(obj, objectCache);
		}
		
		if (!objectCache.containsSelective(result, "EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA")) {
			de.ls5.dywa.generated.rest.types.EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA.copy(obj, result, objectCache);
		}

		return result;
	}

	public de.ls5.dywa.generated.rest.types.Feature readTransient_EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA(final de.ls5.dywa.generated.rest.types.Feature obj) {

		final de.ls5.dywa.generated.rest.types.Feature result;
		
		if (this.objectCache.containsSelective(obj, "EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA")) {
			return obj;
		}
		else {
			result = obj;
			this.objectCache.putSelective(obj, "EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA");
		}

		// Update references to persistent objects

		return result;
	}
	public de.ls5.dywa.generated.rest.types.Feature read_OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w(final long id) {
		
		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj = this.FeatureController.read(id);
		
		if (obj == null) {
			return null;
		}

		de.ls5.dywa.generated.rest.types.Feature result = objectCache.getRestTo(obj);
		
		if (result == null) {
			result = de.ls5.dywa.generated.rest.types.Feature.fromDywaEntity(obj, objectCache);
		}
		
		if (!objectCache.containsSelective(result, "OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w")) {
			de.ls5.dywa.generated.rest.types.OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w.copy(obj, result, objectCache);
		}

		return result;
	}

	public de.ls5.dywa.generated.rest.types.Feature readTransient_OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w(final de.ls5.dywa.generated.rest.types.Feature obj) {

		final de.ls5.dywa.generated.rest.types.Feature result;
		
		if (this.objectCache.containsSelective(obj, "OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w")) {
			return obj;
		}
		else {
			result = obj;
			this.objectCache.putSelective(obj, "OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w");
		}

		// Update references to persistent objects
			{
				{
					final de.ls5.dywa.generated.rest.types.Feature effectiveObj = obj;
					final de.ls5.dywa.generated.rest.types.Feature effectiveResult = result;
					if (effectiveObj.isprioritySet()) {
						final de.ls5.dywa.generated.rest.types.Priority
						 existing = effectiveObj.getpriority();
						de.ls5.dywa.generated.rest.types.Priority
						 newValue;

						if (existing.getDywaId() > 0) {
							// read_OfferDetailsPrioritySelectivex1x3x3x1x1_fcOIkVN8Ee2KQc5QIsW97w
							newValue = this.PriorityREST.read_EditFeatureFormPrioritySelectivex3___HYPHEN_MINUS__UC0cVuXEe28kPQ81TnB9g(existing.getDywaId());
						}
						else {
							// readTransient_OfferDetailsPrioritySelectivex1x3x3x1x1_fcOIkVN8Ee2KQc5QIsW97w
							newValue = this.PriorityREST.readTransient_EditFeatureFormPrioritySelectivex3___HYPHEN_MINUS__UC0cVuXEe28kPQ81TnB9g(existing);
						}

						effectiveResult.setpriority(newValue);
						}
					}
			}

		return result;
	}

		public java.util.Set<de.ls5.dywa.generated.rest.types.Feature> readAll_EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA() {
			
			final java.util.Set<de.ls5.dywa.generated.entity.onbroke.models.app.Feature> objs =
			this.FeatureController.fetch();
	
			final java.util.Set<de.ls5.dywa.generated.rest.types.Feature> result = new java.util.HashSet<>();

			for (final de.ls5.dywa.generated.entity.onbroke.models.app.Feature s : objs) {
				de.ls5.dywa.generated.rest.types.Feature cached = objectCache.getRestTo(s);
				
				if (cached == null) {
					cached = de.ls5.dywa.generated.rest.types.Feature.fromDywaEntity(s, objectCache);
				}
				
				if (!objectCache.containsSelective(cached, "EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA")) {
					de.ls5.dywa.generated.rest.types.EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA.copy(s, cached, objectCache);
				}

				result.add(cached);
			}
			
			return result;
		}
		public java.util.Set<de.ls5.dywa.generated.rest.types.Feature> readAll_OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w() {
			
			final java.util.Set<de.ls5.dywa.generated.entity.onbroke.models.app.Feature> objs =
			this.FeatureController.fetch();
	
			final java.util.Set<de.ls5.dywa.generated.rest.types.Feature> result = new java.util.HashSet<>();

			for (final de.ls5.dywa.generated.entity.onbroke.models.app.Feature s : objs) {
				de.ls5.dywa.generated.rest.types.Feature cached = objectCache.getRestTo(s);
				
				if (cached == null) {
					cached = de.ls5.dywa.generated.rest.types.Feature.fromDywaEntity(s, objectCache);
				}
				
				if (!objectCache.containsSelective(cached, "OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w")) {
					de.ls5.dywa.generated.rest.types.OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w.copy(s, cached, objectCache);
				}

				result.add(cached);
			}
			
			return result;
		}


	public void update_EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA(final de.ls5.dywa.generated.rest.types.Feature value) {

		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj = this.FeatureController.read(value.getDywaId());
		
		this.update_EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA(value, obj);
	}

	public void update_EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA(final de.ls5.dywa.generated.rest.types.Feature value, final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj) {

		// for updates, consider a special selective so we don't clash with read-operations
		if (this.objectCache.containsSelective(obj, "EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA")) {
			// We are already getting updated by someone else
			return;
		}
		else {
			// we don't care for the actual value. key alone is sufficient enough for detection of cycles
			this.objectCache.putSelective(obj, "EditAssignmentFeatureSelectivex1x10x10x18x18x27x27_mOjJMVuZEe2C__HYPHEN_MINUS__dvY0XUmpA");
		}

		if (value.isDywaNameSet()) {
			obj.setDywaName(value.getDywaName());
		}

		{
			final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.istitleSet()) {
			checkVersion(value, obj);
			effectiveObj.settitle(effectiveValue.gettitle());
		}
	}
	}
	public void update_OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w(final de.ls5.dywa.generated.rest.types.Feature value) {

		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj = this.FeatureController.read(value.getDywaId());
		
		this.update_OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w(value, obj);
	}

	public void update_OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w(final de.ls5.dywa.generated.rest.types.Feature value, final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj) {

		// for updates, consider a special selective so we don't clash with read-operations
		if (this.objectCache.containsSelective(obj, "OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w")) {
			// We are already getting updated by someone else
			return;
		}
		else {
			// we don't care for the actual value. key alone is sufficient enough for detection of cycles
			this.objectCache.putSelective(obj, "OfferDetailsFeatureSelectivex1x3x3_fcOIkVN8Ee2KQc5QIsW97w");
		}

		if (value.isDywaNameSet()) {
			obj.setDywaName(value.getDywaName());
		}

		{
			final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.isprioritySet()) {
			checkVersion(value, obj);
			if (effectiveValue.getpriority() == null) {
				effectiveObj.setpriority(null);
			}
			else {
				final de.ls5.dywa.generated.entity.onbroke.models.app.Priority
				 entity;
				final de.ls5.dywa.generated.rest.types.Priority
				 item = effectiveValue.getpriority();
			
				//update_OfferDetailsPrioritySelectivex1x3x3x1x1_fcOIkVN8Ee2KQc5QIsW97w
				this.PriorityREST.update_EditFeatureFormPrioritySelectivex3___HYPHEN_MINUS__UC0cVuXEe28kPQ81TnB9g(item);
				
				entity = this.PriorityController.read(item.getDywaId());
			
				effectiveObj.setpriority(entity);
			
			}
		}
	}
		{
			final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.istitleSet()) {
			checkVersion(value, obj);
			effectiveObj.settitle(effectiveValue.gettitle());
		}
	}
	}
	public void update_FeatureSelective(final de.ls5.dywa.generated.rest.types.Feature value) {

		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj = this.FeatureController.read(value.getDywaId());
		
		this.update_FeatureSelective(value, obj);
	}

	public void update_FeatureSelective(final de.ls5.dywa.generated.rest.types.Feature value, final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj) {

		// for updates, consider a special selective so we don't clash with read-operations
		if (this.objectCache.containsSelective(obj, "FeatureSelective")) {
			// We are already getting updated by someone else
			return;
		}
		else {
			// we don't care for the actual value. key alone is sufficient enough for detection of cycles
			this.objectCache.putSelective(obj, "FeatureSelective");
		}

		if (value.isDywaNameSet()) {
			obj.setDywaName(value.getDywaName());
		}

		{
			final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.isprioritySet()) {
			checkVersion(value, obj);
			if (effectiveValue.getpriority() == null) {
				effectiveObj.setpriority(null);
			}
			else {
				final de.ls5.dywa.generated.entity.onbroke.models.app.Priority
				 entity;
				final de.ls5.dywa.generated.rest.types.Priority
				 item = effectiveValue.getpriority();
			
				//update_PrioritySelective
				this.PriorityREST.update_PrioritySelective(item);
				
				entity = this.PriorityController.read(item.getDywaId());
			
				effectiveObj.setpriority(entity);
			
			}
		}
	}
		{
			final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.isisTemplateForOfferSet()) {
			checkVersion(value, obj);
			effectiveObj.setisTemplateForOffer(effectiveValue.getisTemplateForOffer());
		}
	}
		{
			final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.istitleSet()) {
			checkVersion(value, obj);
			effectiveObj.settitle(effectiveValue.gettitle());
		}
	}
		{
			final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.isisTemplateForBiddingSet()) {
			checkVersion(value, obj);
			effectiveObj.setisTemplateForBidding(effectiveValue.getisTemplateForBidding());
		}
	}
	}

	public de.ls5.dywa.generated.entity.onbroke.models.app.Feature copyToTransient(final de.ls5.dywa.generated.rest.types.Feature value) {

		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj;

		if (this.objectCache.containsTransient(value)) {
			return this.objectCache.getTransient(value);
		}
		else {
			final java.lang.String name;
			if (value.getDywaName() == null || value.getDywaName().isEmpty()) {
				name = "Feature_transient";
			} else {
				name = value.getDywaName();
			}
			obj = FeatureController.createTransient(name);
			this.objectCache.putTransient(value, obj);
		}

		if (value.isDywaNameSet()) {
			obj.setDywaName(value.getDywaName());
		}

			{
				final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
				final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

			// If values were not specified, ignore them
			if (effectiveValue.isprioritySet()) {
				checkVersion(value, obj);
				if (effectiveValue.getpriority() == null) {
					effectiveObj.setpriority(null);
				}
				else {
					final de.ls5.dywa.generated.entity.onbroke.models.app.Priority
					 entity;
					final de.ls5.dywa.generated.rest.types.Priority
					 item = effectiveValue.getpriority();
				
					//update_PrioritySelective
					this.PriorityREST.update_PrioritySelective(item);
					
					entity = this.PriorityController.read(item.getDywaId());
				
					effectiveObj.setpriority(entity);
				
				}
			}
		}
			{
				final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
				final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

			// If values were not specified, ignore them
			if (effectiveValue.isisTemplateForOfferSet()) {
				checkVersion(value, obj);
				effectiveObj.setisTemplateForOffer(effectiveValue.getisTemplateForOffer());
			}
		}
			{
				final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
				final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

			// If values were not specified, ignore them
			if (effectiveValue.istitleSet()) {
				checkVersion(value, obj);
				effectiveObj.settitle(effectiveValue.gettitle());
			}
		}
			{
				final de.ls5.dywa.generated.rest.types.Feature effectiveValue = value;
				final de.ls5.dywa.generated.entity.onbroke.models.app.Feature effectiveObj = obj;

			// If values were not specified, ignore them
			if (effectiveValue.isisTemplateForBiddingSet()) {
				checkVersion(value, obj);
				effectiveObj.setisTemplateForBidding(effectiveValue.getisTemplateForBidding());
			}
		}

		return obj;
	}

	public void delete(final long id) {
		final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj = this.FeatureController.read(id);
		this.FeatureController.delete(obj);
	}

	private void checkVersion(final de.ls5.dywa.generated.rest.types.Feature value, final de.ls5.dywa.generated.entity.onbroke.models.app.Feature obj) {
		if (value.isDywaVersionSet() && value.getDywaVersion() != obj.getDywaVersion()) {
			throw new javax.persistence.OptimisticLockException(obj.getDywaName() + '[' + obj.getDywaId() + "] has been updated by other transaction");
		}
	}
}
