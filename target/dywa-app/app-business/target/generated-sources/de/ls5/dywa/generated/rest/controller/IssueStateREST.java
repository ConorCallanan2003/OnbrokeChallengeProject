// generated by info.scce.dime.generator.rest.SelectiveControllerGenerator
package de.ls5.dywa.generated.rest.controller;

@javax.transaction.Transactional
@javax.enterprise.context.RequestScoped
public class IssueStateREST {

	@javax.inject.Inject
	private info.scce.dime.rest.ObjectCache objectCache;
	@javax.inject.Inject
	private de.ls5.dywa.generated.util.DomainFileController DomainFileController;
	
	
	@javax.inject.Inject
	private de.ls5.dywa.generated.rest.controller.IssueStateREST IssueStateREST;
	@javax.inject.Inject
	private de.ls5.dywa.generated.controller.onbroke.models.app.IssueStateController IssueStateController;


	
	public de.ls5.dywa.generated.rest.types.IssueState read_DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w(final long id) {
		
		final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState obj = this.IssueStateController.read(id);
		
		if (obj == null) {
			return null;
		}

		de.ls5.dywa.generated.rest.types.IssueState result = objectCache.getRestTo(obj);
		
		if (result == null) {
			result = de.ls5.dywa.generated.rest.types.IssueState.fromDywaEntity(obj, objectCache);
		}
		
		if (!objectCache.containsSelective(result, "DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w")) {
			de.ls5.dywa.generated.rest.types.DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w.copy(obj, result, objectCache);
		}

		return result;
	}

	public de.ls5.dywa.generated.rest.types.IssueState readTransient_DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w(final de.ls5.dywa.generated.rest.types.IssueState obj) {

		final de.ls5.dywa.generated.rest.types.IssueState result;
		
		if (this.objectCache.containsSelective(obj, "DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w")) {
			return obj;
		}
		else {
			result = obj;
			this.objectCache.putSelective(obj, "DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w");
		}

		// Update references to persistent objects

		return result;
	}

		public java.util.Set<de.ls5.dywa.generated.rest.types.IssueState> readAll_DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w() {
			
			final java.util.Set<de.ls5.dywa.generated.entity.onbroke.models.app.IssueState> objs =
			new java.util.HashSet<>(java.util.Arrays.asList(de.ls5.dywa.generated.entity.onbroke.models.app.IssueState.values()));
	
			final java.util.Set<de.ls5.dywa.generated.rest.types.IssueState> result = new java.util.HashSet<>();

			for (final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState s : objs) {
				de.ls5.dywa.generated.rest.types.IssueState cached = objectCache.getRestTo(s);
				
				if (cached == null) {
					cached = de.ls5.dywa.generated.rest.types.IssueState.fromDywaEntity(s, objectCache);
				}
				
				if (!objectCache.containsSelective(cached, "DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w")) {
					de.ls5.dywa.generated.rest.types.DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w.copy(s, cached, objectCache);
				}

				result.add(cached);
			}
			
			return result;
		}


	public void update_DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w(final de.ls5.dywa.generated.rest.types.IssueState value) {

		final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState obj = this.IssueStateController.read(value.getDywaId());
		
		this.update_DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w(value, obj);
	}

	public void update_DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w(final de.ls5.dywa.generated.rest.types.IssueState value, final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState obj) {

		// for updates, consider a special selective so we don't clash with read-operations
		if (this.objectCache.containsSelective(obj, "DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w")) {
			// We are already getting updated by someone else
			return;
		}
		else {
			// we don't care for the actual value. key alone is sufficient enough for detection of cycles
			this.objectCache.putSelective(obj, "DiscussionTableIssueStateSelectivex1x2x2_UOyxYVN9Ee2KQc5QIsW97w");
		}

		if (value.isDywaNameSet()) {
			obj.setDywaName(value.getDywaName());
		}

	}
	public void update_IssueStateSelective(final de.ls5.dywa.generated.rest.types.IssueState value) {

		final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState obj = this.IssueStateController.read(value.getDywaId());
		
		this.update_IssueStateSelective(value, obj);
	}

	public void update_IssueStateSelective(final de.ls5.dywa.generated.rest.types.IssueState value, final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState obj) {

		// for updates, consider a special selective so we don't clash with read-operations
		if (this.objectCache.containsSelective(obj, "IssueStateSelective")) {
			// We are already getting updated by someone else
			return;
		}
		else {
			// we don't care for the actual value. key alone is sufficient enough for detection of cycles
			this.objectCache.putSelective(obj, "IssueStateSelective");
		}

		if (value.isDywaNameSet()) {
			obj.setDywaName(value.getDywaName());
		}

		{
			final de.ls5.dywa.generated.rest.types.IssueState effectiveValue = value;
			final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState effectiveObj = obj;

		// If values were not specified, ignore them
		if (effectiveValue.isdywaDisplayNameSet()) {
			checkVersion(value, obj);
			effectiveObj.setdywaDisplayName(effectiveValue.getdywaDisplayName());
		}
	}
	}


	private void checkVersion(final de.ls5.dywa.generated.rest.types.IssueState value, final de.ls5.dywa.generated.entity.onbroke.models.app.IssueState obj) {
		if (value.isDywaVersionSet() && value.getDywaVersion() != obj.getDywaVersion()) {
			throw new javax.persistence.OptimisticLockException(obj.getDywaName() + '[' + obj.getDywaId() + "] has been updated by other transaction");
		}
	}
}
